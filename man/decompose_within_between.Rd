% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/decompose_within_between.R
\name{decompose_within_between}
\alias{decompose_within_between}
\title{Decompose Variables into Within-Group and Between-Group Components}
\usage{
decompose_within_between(data, group, vars)
}
\arguments{
\item{data}{A data frame containing the variables to decompose.}

\item{group}{A character string specifying the name of the grouping variable.}

\item{vars}{A character vector specifying the names of variables to decompose.}
}
\value{
A data frame containing:
\itemize{
\item All original variables from \code{data}
\item Grand mean centered versions (suffix: \code{_grand_mean_centered})
\item Between-group means (suffix: \code{_between_[group]})
\item Within-group deviations (suffix: \code{_within_[group]})
}
}
\description{
This function performs a multilevel decomposition of variables by computing:
\itemize{
\item Grand mean centered scores (deviations from overall mean)
\item Between-group scores (group means)
\item Within-group scores (deviations from group means)
}
}
\details{
This decomposition is commonly used in multilevel modeling to separate within-group
and between-group variance components (Enders & Tofighi, 2007). The decomposed
variables are particularly useful for Random Effects Within-Between (REWB) models
(Bell et al., 2019), which allow the estimation of distinct within-group and
between-group effects.

The function performs three centering operations:

\strong{1. Grand mean centering:} Each value is expressed as a deviation from the
overall sample mean. This centers the entire distribution at zero.

\strong{2. Between-group component:} For each observation, this equals the mean of
their group. These values are constant within groups and vary between groups.
In REWB models, this represents the between-group effect of the predictor.

\strong{3. Within-group component:} Each value is expressed as a deviation from
their group mean. This removes all between-group variance and represents the
within-group effect of the predictor in REWB models.
}
\examples{
\dontrun{
# Create sample data
data <- data.frame(
  participant = rep(1:10, each = 5),
  stress = rnorm(50, 50, 10),
  mood = rnorm(50, 50, 10)
)

# Decompose variables for REWB modeling
result <- decompose_within_between(
  data = data,
  group = "participant",
  vars = c("stress", "mood")
)
}

}
\references{
Bell, A., Fairbrother, M., & Jones, K. (2019). Fixed and random effects models:
making an informed choice. \emph{Quality & Quantity}, 53(2), 1051-1074.

Enders, C. K., & Tofighi, D. (2007). Centering predictor variables in cross-sectional
multilevel models: A new look at an old issue. \emph{Psychological Methods}, 12(2), 121-138.
}
\seealso{
\code{\link{within_between_correlations}} for computing correlations on decomposed components
}
